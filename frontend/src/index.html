<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css">
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>

    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js"></script>

    <script src='//www.google.com/recaptcha/api.js'></script>

    <style>
        label {
            display: inline-block;
            width: 120px;
            vertical-align: middle;
        }

        input {
            display: inline-block;
            vertical-align: middle;
        }

        input.ng-invalid {
            border: solid red 2px;
        }

        textarea {
            width: 300px;
            height: 80px;
        }
    </style>

    <script>
        angular.module("mainModule", ['vcRecaptcha'])
                .controller("mainController", function ($scope, $http) {

                    $scope.createUserDTO = {};

                    $scope.submitData = function () {


                        $http.post("/api/public/users", $scope.createUserDTO)
                                .success(function (data, status, headers, config) {
                                    $scope['submitDebugText1'] = data;
                                })
                                .error(function (data, status, headers, config) {
                                    $scope['submitDebugText1'] = "SUBMIT ERROR";
                                });
                    };
                });
    </script>
</head>

<body ng-app="mainModule">
<div ng-controller="mainController">

    <h3>2. AJAX form submission with ng-submit</h3>

    <form name="createAccountForm" ng-submit="submitData()" novalidate>

        <label for="userName">Username:</label>
        <input id="userName" type="text" name="username" ng-model="createUserDTO.username" required/><br/>

        <label for="email">Email:</label>
        <input id="email" type="text" name="email" ng-model="createUserDTO.email" required/><br/>

        <label for="password">Password:</label>
        <input id="password" type="password" name="password" ng-model="createUserDTO.password" required/><br/>

        <div class="g-recaptcha" data-sitekey="6LfVH8cSAAAAAGWlBywDLqdMwNR7NfH2_5NEXFag"></div>

        <br/>

        <button type="submit"
                ng-disabled="createAccountForm.$invalid">Submit
        </button>
    </form>
    <br/>
    <strong><label for="submitDebugText1">Submit result:</label></strong><br/>
    <textarea id="submitDebugText1">{{ajaxSubmitResult1 | json}}</textarea><br/>
    <br/>


</div>
</body>
</html>